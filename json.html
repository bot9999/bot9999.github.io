<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AJAX</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
				$.ajax({
                type: "GET",
                url: "https://api.coinmarketcap.com/v1/ticker/?convert=KRW",
				contentType: 'application/x-www-form-urlencoded, charset=utf-8',
                dataType: "json",
                success: function(result){
                    //btcPrice = result[0].price_usd;
					//alert(result[0].price_usd);
					var chk = getQuerystring('symbol')
					chk = chk.toUpperCase();
					var i, name= "";
					var i, price_btc= 0;
					var i, price_krw= 0;
					var i, price_usd= 0;
					var i, percent_change_1h= 0;
					var i, percent_change_24h= 0;
					for (i = 0; i < 100; i++) { 
					if(result[i].symbol == chk){
					name = result[i].name;
					price_btc = Number(result[i].price_btc);
					price_krw = Number(result[i].price_krw);
					price_usd = Number(result[i].price_usd);
					percent_change_1h = Number(result[i].percent_change_1h);
					percent_change_24h = Number(result[i].percent_change_24h);
					}
					
					}
					    document.body.append(name+":");
						document.body.append(price_btc+":");
						document.body.append(price_krw.toFixed(2)+"원:");
						document.body.append("$"+price_usd.toFixed(4)+":");
						document.body.append("1시간등락폭"+percent_change_1h+"%:");
						document.body.append("24시간등락폭"+percent_change_24h+"%");
                },
            error: function(err){
                alert(err);
            }
            });    
        return false;
	});
function getQuerystring(paramName){ 
var _tempUrl = window.location.search.substring(1); //url에서 처음부터 '?'까지 삭제 
var _tempArray = _tempUrl.split('&'); // '&'을 기준으로 분리하기 
  for(var i = 0; _tempArray.length; i++) {
	 var _keyValuePair = _tempArray[i].split('='); // '=' 을 기준으로 분리하기 
	 if(_keyValuePair[0] == paramName){ // _keyValuePair[0] : 파라미터 명 
	 // _keyValuePair[1] : 파라미터 값 
	 return _keyValuePair[1]; 
	 } 
  } 
 }

</script>
</head>
<body>





</body>
</html>
