<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AJAX</title>

<!-- Global site tag (gtag.js) - Google Analytics --> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
$(document).ready(function () {
	var proxyJsonp="https://script.google.com/macros/s/AKfycbwmqG55tt2d2FcT_WQ3WjCSKmtyFpkOcdprSITn45-4UgVJnzp9/exec";

jQuery.ajaxOrig=jQuery.ajax;jQuery.ajax=function(a,b){function d(a){a=encodeURI(a).replace(/&/g,"%26");return proxyJsonp+"?url="+a+"&callback=?"}var c="object"===typeof a?a:b||{};c.url=c.url||("string"===typeof a?a:"");var c=jQuery.ajaxSetup({},c),e=function(a,c){var b=document.createElement("a");b.href=a;return c.crossOrigin&&"http"==a.substr(0,4).toLowerCase()&&"localhost"!=b.hostname&&"127.0.0.1"!=b.hostname&&b.hostname!=window.location.hostname}(c.url,c);c.proxy&&0<c.proxy.length&&(proxyJsonp=c.proxy,"object"===typeof a?

a.crossDomain=!0:"object"===typeof b&&(b.crossDomain=!0));e&&("object"===typeof a?a.url&&(a.url=d(a.url),a.charset&&(a.url+="&charset="+a.charset),a.dataType="json"):"string"===typeof a&&"object"===typeof b&&(a=d(a),b.charset&&(a+="&charset="+b.charset),b.dataType="json"));return jQuery.ajaxOrig.apply(this,arguments)};jQuery.ajax.prototype=new jQuery.ajaxOrig;jQuery.ajax.prototype.constructor=jQuery.ajax;
		$.ajax({
		crossOrigin: true,
                type: "GET",
                url: "https://api.coinmarketcap.com/v1/ticker/?convert=KRW",
				contentType: 'application/x-www-form-urlencoded, charset=utf-8',
                dataType: "json",
                success: function(result){
      
					var chk = getQuerystring('symbol')
					chk = chk.toUpperCase();
					var i, name= "";
					var i, rank= 0;
					var i, price_btc= 0;
					var i, price_krw= 0;
					var i, price_usd= 0;
					var i, percent_change_1h= 0;
					var i, percent_change_24h= 0;
					for (i = 0; i < 100; i++) { 
					if(result[i].symbol == chk){
					name = result[i].name;
					rank = Number(result[i].rank);
					price_btc = Number(result[i].price_btc);
					price_krw = Number(result[i].price_krw);
					price_usd = Number(result[i].price_usd);
					percent_change_1h = Number(result[i].percent_change_1h);
					percent_change_24h = Number(result[i].percent_change_24h);
					}
					
					}
					var tag ="(coinmarketcap기준)<br>"+name+"("+rank+"위)<br>USD : $"
					+price_usd.toFixed(4)+"("+percent_change_1h+"%)<br>BTC : "
					+price_btc+"<br>KRW : "+price_krw.toFixed(2)+"원<br> 24시간전 ("+percent_change_24h+"%)";
					$("#target").html(tag);

                },
            error: function(err){
                alert(err);
            }
            });    
        return false;
	});
function getQuerystring(paramName){ 
var _tempUrl = window.location.search.substring(1);
var _tempArray = _tempUrl.split('&');
  for(var i = 0; _tempArray.length; i++) {
	 var _keyValuePair = _tempArray[i].split('=');
	 if(_keyValuePair[0] == paramName){
	 return _keyValuePair[1]; 
	 } 
  } 
 }

</script>
</head>
<body>

<div id=target></div>

테스트중

</body>
</html>
