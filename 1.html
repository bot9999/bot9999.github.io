<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AJAX</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script>
var xmlhttp;  

if (window.XMLHttpRequest) {  

    xmlhttp = new XMLHttpRequest();

} 

else {  

    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

}

 

xmlhttp.onreadystatechange = function() {  

    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {

         //통신 성공시 구현부분

		var result = JSON.parse(xmlhttp.responseText);

		var chk = msg;

		chk = chk.toUpperCase();

		var i, name= "";

		var i, rank= 0;

		var i, price_btc= 0;

		var i, price_krw= 0;

		var i, price_usd= 0;

		var i, percent_change_1h= 0;

		var i, percent_change_24h= 0;

		for (i = 0; i < result.length; i++) {

			if(result[i].symbol == chk){

				name = result[i].name;

				rank = Number(result[i].rank);

				price_btc = Number(result[i].price_btc);

				price_krw = Number(result[i].price_krw);

				price_usd = Number(result[i].price_usd);

				percent_change_1h = Number(result[i].percent_change_1h);

				percent_change_24h = Number(result[i].percent_change_24h);

			}

		

		}

		var tag ="(coinmarketcap기준)\n"+name+"("+rank+"위)\nUSD : $"

		+price_usd.toFixed(4)+"("+percent_change_1h+"%)\nBTC : "

		+price_btc+"\nKRW : "+price_krw.toFixed(2)+"원\n 24시간전 ("+percent_change_24h+"%)";

 

		replier.reply(tag);

    }

}

xmlhttp.open("GET", "https://api.coinmarketcap.com/v1/ticker/?convert=KRW", true);  

xmlhttp.send();  


</script>
</head>
<body>

<div id=target>
</div>



</body>
</html>
